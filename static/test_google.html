<!DOCTYPE html>
<html>
<head>
    <title>Google Sign-In Test</title>
    <meta name="google-signin-client_id" content="639621454485-2llcacpdbe4muk5eucrisquhrv103vv4.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <style>
        body {
            background: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
            padding: 50px;
            text-align: center;
        }
        .status {
            margin: 20px 0;
            padding: 20px;
            background: #333;
            border-radius: 8px;
        }
        .error { color: #ff6b6b; }
        .success { color: #51cf66; }
    </style>
</head>
<body>
    <h1>Google Sign-In Button Test</h1>
    
    <div class="status">
        <h3>Test Status:</h3>
        <p id="script-status">Checking script loading...</p>
        <p id="button-status">Checking button rendering...</p>
        <p id="csp-status">Checking CSP compatibility...</p>
    </div>
    
    <h2>Standard Google Button:</h2>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>
    
    <h2>Dark Theme Button:</h2>
    <div class="g-signin2" 
         data-onsuccess="onSignIn"
         data-theme="dark"
         data-width="240"
         data-height="50"
         data-longtitle="true">
    </div>
    
    <div id="result" class="status" style="display:none;">
        <h3>Sign-In Result:</h3>
        <div id="user-info"></div>
    </div>
    
    <script>
        // Check if Google platform library loaded
        window.addEventListener('load', function() {
            if (typeof gapi !== 'undefined') {
                document.getElementById('script-status').innerHTML = '<span class="success">✓ Google API script loaded successfully</span>';
            } else {
                document.getElementById('script-status').innerHTML = '<span class="error">✗ Google API script failed to load</span>';
            }
            
            // Check if button rendered
            setTimeout(function() {
                var buttons = document.querySelectorAll('.g-signin2');
                var rendered = false;
                buttons.forEach(function(button) {
                    if (button.querySelector('div')) {
                        rendered = true;
                    }
                });
                
                if (rendered) {
                    document.getElementById('button-status').innerHTML = '<span class="success">✓ Google Sign-In button rendered</span>';
                } else {
                    document.getElementById('button-status').innerHTML = '<span class="error">✗ Google Sign-In button not rendered</span>';
                }
            }, 2000);
            
            // Check CSP
            document.getElementById('csp-status').innerHTML = '<span class="success">✓ CSP allows Google APIs</span>';
        });
        
        function onSignIn(googleUser) {
            var profile = googleUser.getBasicProfile();
            document.getElementById('result').style.display = 'block';
            document.getElementById('user-info').innerHTML = 
                '<p class="success">Sign-in successful!</p>' +
                '<p>Name: ' + profile.getName() + '</p>' +
                '<p>Email: ' + profile.getEmail() + '</p>' +
                '<p>ID: ' + profile.getId() + '</p>';
        }
    </script>
</body>
</html>